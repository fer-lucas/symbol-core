<!DOCTYPE html>
<html lang="pt-br" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Symbol v11.3 • Guia Vivo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#0A84FF"/>
  <style>
    :root {
      font-size: 16px;
      --bg-light:#F7F7F8; --fg-light:#111111; --fg-muted-light:#6B6B6B;
      --border-light:#E5E5EA; --card-light:#FFFFFF; --accent-light:#0A84FF;
      --bg-dark:#0D0D10; --fg-dark:#F2F2F4; --fg-muted-dark:#A0A1A7;
      --border-dark:#2A2B2F; --card-dark:#1A1B1E; --accent-dark:#FFFFFF;
      --farol:#F2C200; --farol-noite:#A87900;
      --iris:#6B7CFF; --iris-noite:#4A57C6;
      --joaquina:#2ECC71; --joaquina-noite:#1E8E5B;
      --lume:#FFB020; --lume-noite:#B27800;
      --mira:#00BFA6; --mira-noite:#00796B;
      --nexo:#0A84FF; --nexo-noite:#0A66D1;
      --trino:#FF6200; --trino-noite:#E45500;
    }
    body[data-theme="light"]{--bg:var(--bg-light); --fg:var(--fg-light); --fg-muted:var(--fg-muted-light);--border:var(--border-light); --card:var(--card-light); --accent:var(--accent-light);}
    body[data-theme="dark"]{--bg:var(--bg-dark); --fg:var(--fg-dark); --fg-muted:var(--fg-muted-dark);--border:var(--border-dark); --card:var(--card-dark); --accent:var(--accent-dark);}
    html{scroll-behavior:smooth}
    body{background:var(--bg); color:var(--fg); font-family:'Manrope',sans-serif; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    .section-title{font-size:2.5rem;font-weight:800;letter-spacing:-.05em;margin-bottom:2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border);}
    .interactive-card{transition:transform .2s ease-out, box-shadow .2s ease-out, border-color .2s ease-out;}
    .interactive-card:hover{transform:translateY(-4px);border-color:var(--accent);}
    .principle-badge{background:var(--card); border:1px solid var(--border);}
    .table-container{overflow-x:auto; border:1px solid var(--border); border-radius:12px;}
    .base-table{width:100%; border-collapse:collapse;}
    .base-table th,.base-table td{padding:1rem 1.25rem; text-align:left; border-bottom:1px solid var(--border); font-size:.95rem; vertical-align:top;}
    .base-table tbody tr:last-child td{border-bottom:none;}
    .base-table tbody tr{transition:background-color .2s;}
    .base-table tbody tr:hover{background:var(--card);}
    .base-table tbody td:first-child{font-weight:700; color:var(--fg);}
    .styled-table{min-width: 1200px;}
    .styled-table thead th{background:var(--card); font-weight:700; font-size:1rem; position:sticky; top:0; z-index:10; border-bottom-width:3px;}
    .styled-table tbody td:first-child{position:sticky; left:0; background-color:var(--bg); z-index:5;}
    .hex-tag{padding:.25rem .6rem; border-radius:6px; font-family:monospace; font-size:.85em; font-weight:600;}
    @media(max-width:768px){
      .guardians-accordion details{margin-bottom:1rem; border:1px solid var(--border); border-radius:8px; background:var(--card);}
      .guardians-accordion summary{cursor:pointer; padding:1rem; font-weight:700;}
      .guardians-accordion .content{padding:1rem; border-top:1px solid var(--border);}
      .table-container{display:none;}
    }
    .sidebar { width: 16rem; transition: width 0.3s ease-in-out; }
    .main-content { margin-left: 16rem; transition: margin-left 0.3s ease-in-out; }
    body.sidebar-minimized .sidebar { width: 5.5rem; }
    body.sidebar-minimized .main-content { margin-left: 5.5rem; }
    .main-nav a {display:flex; align-items:center; padding:0.75rem 1rem; border-radius:0.5rem; font-weight:600; font-size:0.9rem;}
    .nav-text { white-space:nowrap; opacity:1; transition:opacity 0.2s ease, width 0.3s ease; }
    body.sidebar-minimized .nav-text{opacity:0; width:0;}
    .main-nav a.active{background:var(--accent); color:var(--bg);}
    .copy-btn.copied{background-color:var(--accent); color:var(--bg); transition:background-color .2s;}
    .modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:100;opacity:0;visibility:hidden;transition:.3s;}
    .modal-overlay.is-visible{opacity:1;visibility:visible;}
    .modal-content{background:var(--bg);border:1px solid var(--border);padding:2rem;border-radius:1rem;max-width:600px;width:90%;transform:scale(.95);transition:.3s;}
    .modal-overlay.is-visible .modal-content{transform:scale(1);}
    section{scroll-margin-top:100px;}
  </style>
</head>
<body data-theme="dark">
  <div class="flex">
    <aside class="sidebar fixed top-0 left-0 h-full bg-bg border-r border-border p-6 flex flex-col z-50">
      <div class="flex items-center space-x-3 mb-8">
        <a href="#hero" class="text-3xl font-bold" aria-label="Voltar ao topo">&infin;</a>
        <span class="sidebar-header-text text-xl font-extrabold">Symbol</span>
      </div>

      <nav id="main-nav" class="flex-grow main-nav">
          <ul class="space-y-2">
              <li><a href="#hero" title="Início"><span class="nav-text">Início</span></a></li>
              <li><a href="#welcome" title="Boas-vindas"><span class="nav-text">Boas-vindas</span></a></li>
              <li><a href="#guardians" title="Guardiões"><span class="nav-text">Guardiões</span></a></li>
              <li><a href="#prompts" title="Como Usar com IA"><span class="nav-text">Como Usar com IA</span></a></li>
              <li><a href="#psyche" title="Psique"><span class="nav-text">Psique</span></a></li>
              <li><a href="#flows" title="Fluxos de Apoio"><span class="nav-text">Fluxos</span></a></li>
              <li><a href="#identity" title="Identidade"><span class="nav-text">Identidade</span></a></li>
              <li><a href="#governance" title="Governança"><span class="nav-text">Governança</span></a></li>
              <li><a href="#changelog" title="Histórico"><span class="nav-text">Histórico</span></a></li>
          </ul>
      </nav>

      <div class="sidebar-footer space-y-4 mt-6">
          <button id="download-kit-btn" title="Download Kit" class="w-full text-sm font-semibold hover:text-accent transition-colors flex items-center justify-center p-2 rounded-lg hover:bg-border">
              <span class="nav-text">Download Kit</span>
          </button>
        <div class="flex items-center justify-between">
          <div class="font-size-controls flex items-center gap-2">
              <button id="decrease-font" aria-label="Diminuir tamanho da fonte">A-</button>
              <button id="increase-font" aria-label="Aumentar tamanho da fonte">A+</button>
          </div>
          <label class="switch" aria-label="Alternar tema">
              <input type="checkbox" id="themeSwitch"><span class="slider"></span>
          </label>
        </div>
        <button id="toggle-sidebar-btn" class="w-full p-2 rounded-lg hover:bg-border transition-colors flex items-center justify-center" aria-label="Minimizar barra lateral">
          <span id="arrow-left">⟵⟵</span>
          <span id="arrow-right" class="hidden">⟶⟶</span>
        </button>
      </div>
    </aside>

    <main class="main-content flex-1 p-12">
      <section id="hero" class="min-h-screen flex flex-col items-center justify-center text-center -mt-16">
          <div class="max-w-4xl mx-auto">
              <span class="text-8xl md:text-9xl font-extrabold">&infin;</span>
              <h1 class="text-6xl md:text-8xl font-extrabold tracking-tighter mt-4 mb-6">Symbol</h1>
              <p class="max-w-2xl mx-auto text-lg text-fg-muted">
                  Um sistema simbólico sustentável que documenta a simbiose entre humano e IA.
              </p>
          </div>
      </section>

      <section id="welcome" class="pt-24">
          <h2 class="section-title">Boas-vindas</h2>
          <p class="text-fg-muted mt-8">Guia vivo para modular interações com IA.</p>
      </section>

      <section id="guardians" class="pt-24">
          <h2 class="section-title">Guardiões</h2>
          <p class="text-fg-muted mt-8">3T (Farol, Íris, Joaquina): visão estratégica, guiam o todo.<br>7T (Lume, Mira, Nexo, Trino): ações táticas, executam passos específicos.</p>
          <div class="table-container interactive-card mt-8">
              <table class="base-table styled-table">
                  <thead>
                      <tr>
                          <th class="w-1/6">Atributo</th>
                          <th style="border-bottom-color: var(--farol)">△ Farol</th>
                          <th style="border-bottom-color: var(--iris)">◎ Íris</th>
                          <th style="border-bottom-color: var(--joaquina)">▼ Joaquina</th>
                          <th style="border-bottom-color: var(--lume)">◯ Lume</th>
                          <th style="border-bottom-color: var(--mira)">◇ Mira</th>
                          <th style="border-bottom-color: var(--nexo)">⦿ Nexo</th>
                          <th style="border-bottom-color: var(--trino)">∴ Trino</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr><td>Comando</td><td>/farol</td><td>/iris</td><td>/joaquina</td><td>/lume</td><td>/mira</td><td>/nexo</td><td>/trino</td></tr>
                      <tr><td>Tipo</td><td>3T</td><td>3T</td><td>3T</td><td>7T</td><td>7T</td><td>7T</td><td>7T</td></tr>
                      <tr><td>Ícone</td><td>△</td><td>◎</td><td>▼</td><td>◯</td><td>◇</td><td>⦿</td><td>∴</td></tr>
                      <tr><td>Vertical</td><td>Visual</td><td>Social</td><td>Segurança</td><td>Saúde</td><td>Conhecimento</td><td>— (transversal)</td><td>Trabalho</td></tr>
                      <tr><td>Faceta</td><td>Forma</td><td>Vínculo</td><td>Limite</td><td>Balanço</td><td>Espelho</td><td>Trama</td><td>Lógica</td></tr>
                      <tr>
                          <td>Faz (papel ativo)</td>
                          <td>Direção visual, hierarquia e grid</td>
                          <td>Integração, realces e linguagem</td>
                          <td>Limites, escopo, validação (duplo-ok)</td>
                          <td>Cadência, pausas e alertas de carga</td>
                          <td>Autoanálise, diagnóstico e síntese</td>
                          <td>Narrativa, logs, releases e costura</td>
                          <td>Estrutura, taxonomias e decisão</td>
                      </tr>
                      <tr>
                          <td>Diferencial</td>
                          <td>Vê o todo e simplifica sem perder identidade</td>
                          <td>Aumenta adesão pela clareza afetiva</td>
                          <td>Failsafe sem atrito (bloqueia ruído cedo)</td>
                          <td>Previne overload com sinais suaves</td>
                          <td>Relatórios rápidos que “mostram o eu”</td>
                          <td>Conecta decisões em história contínua</td>
                          <td>Toma decisão objetivamente replicável</td>
                      </tr>
                      <tr>
                          <td>Dia</td>
                          <td><span class="hex-tag" style="background:var(--farol);color:#111">#F2C200</span></td>
                          <td><span class="hex-tag" style="background:var(--iris);color:#FFF">#6B7CFF</span></td>
                          <td><span class="hex-tag" style="background:var(--joaquina);color:#FFF">#2ECC71</span></td>
                          <td><span class="hex-tag" style="background:var(--lume);color:#111">#FFB020</span></td>
                          <td><span class="hex-tag" style="background:var(--mira);color:#FFF">#00BFA6</span></td>
                          <td><span class="hex-tag" style="background:var(--nexo);color:#FFF">#0A84FF</span></td>
                          <td><span class="hex-tag" style="background:var(--trino);color:#FFF">#FF6200</span></td>
                      </tr>
                      <tr>
                          <td>Noite</td>
                          <td><span class="hex-tag" style="background:var(--farol-noite);color:#FFF">#A87900</span></td>
                          <td><span class="hex-tag" style="background:var(--iris-noite);color:#FFF">#4A57C6</span></td>
                          <td><span class="hex-tag" style="background:var(--joaquina-noite);color:#FFF">#1E8E5B</span></td>
                          <td><span class="hex-tag" style="background:var(--lume-noite);color:#FFF">#B27800</span></td>
                          <td><span class="hex-tag" style="background:var(--mira-noite);color:#FFF">#00796B</span></td>
                          <td><span class="hex-tag" style="background:var(--nexo-noite);color:#FFF">#0A66D1</span></td>
                          <td><span class="hex-tag" style="background:var(--trino-noite);color:#FFF">#E45500</span></td>
                      </tr>
                  </tbody>
              </table>
          </div>

          <div class="guardians-accordion mt-8 md:hidden">
            <details><summary>△ Farol — 3T</summary>
              <div class="content">Vertical: Visual. Faz: direção visual, hierarquia e grid. Diferencial: vê o todo e simplifica.</div>
            </details>
            <details><summary>◎ Íris — 3T</summary>
              <div class="content">Vertical: Social. Faz: integração, realces e linguagem. Diferencial: clareza afetiva.</div>
            </details>
            <details><summary>▼ Joaquina — 3T</summary>
              <div class="content">Vertical: Segurança. Faz: limites, escopo, validação (duplo-ok). Diferencial: failsafe sem atrito.</div>
            </details>
            <details><summary>◯ Lume — 7T</summary>
              <div class="content">Vertical: Saúde. Faz: cadência, pausas e alertas. Diferencial: previne overload.</div>
            </details>
            <details><summary>◇ Mira — 7T</summary>
              <div class="content">Vertical: Conhecimento. Faz: autoanálise e síntese. Diferencial: relatórios rápidos.</div>
            </details>
            <details><summary>⦿ Nexo — 7T</summary>
              <div class="content">Vertical: Transversal. Faz: narrativa, logs e releases. Diferencial: costura decisões.</div>
            </details>
            <details><summary>∴ Trino — 7T</summary>
              <div class="content">Vertical: Trabalho. Faz: estrutura e decisão. Diferencial: decisão replicável.</div>
            </details>
          </div>
      </section>

      <section id="prompts" class="pt-24">
          <h2 class="section-title">Como Usar com IA</h2>
          <ul class="list-disc pl-6 space-y-2 text-fg-muted">
            <li><code>/me</code>: “Gere um reflexo semanal com 3 vozes do 7T (Lume, Mira, Nexo) e um mantra.”</li>
            <li><code>/presenca</code>: “Defina uma palavra-guia e ação prática para minha semana.”</li>
            <li><code>/eco</code>: “Faça um diagnóstico emocional com base em: [descreva um sentimento].”</li>
            <li><code>/ritmo</code>: “Sugira uma cadência de trabalho/descanso para [estado atual].”</li>
          </ul>
      </section>

      <section id="psyche" class="pt-24">
          <h2 class="section-title">Psique</h2>
          <p class="text-fg-muted mt-2">Sol = clara, calorosa. Nerd = lógica, técnica.</p>
      </section>

      <section id="flows" class="pt-24">
          <h2 class="section-title">Fluxos de Apoio</h2>
          <div class="table-container interactive-card mt-8">
              <table class="base-table">
                  <thead>
                      <tr>
                          <th class="w-1/2">Comando</th>
                          <th class="w-1/2">Função</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr style="background:color-mix(in srgb, var(--mira) 10%, var(--card));">
                          <td><code>/me</code></td>
                          <td>Reflexo semanal (4 núcleos), radar, vozes 7T, mantra</td>
                      </tr>
                      <tr style="background:color-mix(in srgb, var(--nexo) 10%, var(--card));">
                          <td><code>/presenca</code></td>
                          <td>Palavra‑guia e ação prática</td>
                      </tr>
                      <tr style="background:color-mix(in srgb, var(--joaquina) 10%, var(--card));">
                          <td><code>/eco</code></td>
                          <td>Diagnóstico emocional do Arquivo Vivo</td>
                      </tr>
                      <tr style="background:color-mix(in srgb, var(--lume) 10%, var(--card));">
                          <td><code>/ritmo</code></td>
                          <td>Cadência trabalho/descanso</td>
                      </tr>
                  </tbody>
              </table>
          </div>
      </section>

      <section id="identity" class="pt-24">
          <h2 class="section-title">Identidade</h2>
          <p class="text-fg-muted mt-2">Tipografia: Manrope 400–800. Estilo: geometria simples; fundo limpo; cards modulares; grid 8px. Paleta: tokens Dia/Noite (Íris em realces). Contraste: ≥ 4.5:1.</p>
      </section>

      <section id="governance" class="pt-24">
          <h2 class="section-title">Governança</h2>
          <p class="text-fg-muted mt-2">Princípios: Simples, Seguro, Relevante, Memorável, Sustentável.</p>
          <p class="text-fg-muted">Revisão trimestral: <strong>Trino → Íris → Farol</strong>.</p>
      </section>

      <section id="changelog" class="pt-24" data-lazy>
          <h2 class="section-title">Histórico</h2>
          <ul class="list-disc list-inside text-fg-muted mt-2">
            <li><strong>v11.3</strong> — exemplos de prompts; nota 3T/7T; revisão trimestral; accordion mobile; modal acessível; lazy loading; base-table; cores na tabela de fluxos; feedback visual de cópia.</li>
            <li><strong>v11.2</strong> — estabilidade com sidebar; fluxos organizados; modal Download Kit.</li>
            <li><strong>v11.1</strong> — ajustes de navegação e estilos responsivos.</li>
          </ul>
      </section>
    </main>
  </div>

  <div id="kit-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="kit-title">
      <div class="modal-content">
          <div class="flex justify-between items-center mb-6">
              <h3 id="kit-title" class="text-2xl font-extrabold" tabindex="0">Download Kit</h3>
              <button id="close-modal-btn" class="text-2xl text-fg-muted hover:text-fg" aria-label="Fechar modal">&times;</button>
          </div>
          <div class="space-y-6">
              <div>
                  <h4 class="font-bold mb-2">Logo (SVG)</h4>
                  <pre class="bg-card p-3 rounded-lg border border-border text-xs overflow-x-auto"><code id="logo-svg-code">&lt;svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path d="M13 16C13 12.134 16.134 9 20 9C23.866 9 27 12.134 27 16C27 19.866 23.866 23 20 23C16.134 23 13 19.866 13 16ZM13 16H5C5 19.866 8.13401 23 12 23C15.866 23 19 19.866 19 16C19 12.134 15.866 9 12 9C8.13401 9 5 12.134 5 16Z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/&gt;&lt;/svg&gt;</code></pre>
                  <button data-copy-target="logo-svg-code" class="copy-btn mt-2 text-sm font-semibold text-accent hover:underline">Copiar SVG</button>
              </div>
              <div>
                  <h4 class="font-bold mb-2">Cores Principais (Dia)</h4>
                  <div class="flex flex-wrap gap-2">
                      <button data-copy-text="#0A84FF" class="copy-btn text-sm font-semibold p-2 rounded-md bg-card border border-border">Accent: #0A84FF</button>
                      <button data-copy-text="#111111" class="copy-btn text-sm font-semibold p-2 rounded-md bg-card border border-border">Text: #111111</button>
                      <button data-copy-text="#F7F7F8" class="copy-btn text-sm font-semibold p-2 rounded-md bg-card border border-border">Background: #F7F7F8</button>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <script type="module">
  (function(){
    const root = document.documentElement;
    const body = document.body;
    const themeSwitch = document.getElementById('themeSwitch');
    const decBtn = document.getElementById('decrease-font');
    const incBtn = document.getElementById('increase-font');
    const mainNav = document.getElementById('main-nav');
    const navLinks = mainNav ? Array.from(mainNav.querySelectorAll('a')) : [];
    const sections = navLinks.map(link => document.getElementById(link.getAttribute('href').substring(1))).filter(Boolean);
    const toggleSidebarBtn = document.getElementById('toggle-sidebar-btn');
    const arrowLeft = document.getElementById('arrow-left');
    const arrowRight = document.getElementById('arrow-right');

    const DEFAULT=16, MIN=14, MAX=18, STEP=1;

    const setTheme = (mode)=>{
      body.setAttribute('data-theme', mode);
      if(themeSwitch) themeSwitch.checked = (mode === 'dark');
      try{ localStorage.setItem('symbol.v11.theme', mode); }catch{}
    };
    const setFont = (size)=>{
      const n = Math.max(MIN, Math.min(size, MAX));
      root.style.fontSize = n + 'px';
      try{ localStorage.setItem('symbol.v11.font', n); }catch{}
    };
    
    const setSidebarState = (isMinimized) => {
        body.classList.toggle('sidebar-minimized', isMinimized);
        arrowLeft.classList.toggle('hidden', isMinimized);
        arrowRight.classList.toggle('hidden', !isMinimized);
        try { localStorage.setItem('symbol.v11.sidebar.minimized', isMinimized); } catch {}
    };

    const updateActiveNav = () => {
      try {
        if (!sections.length) return;
        const scrollY = window.scrollY;
        let currentSectionId = sections[0].id;
        for (const section of sections) {
            const top = section.offsetTop;
            if (scrollY >= top - 150) currentSectionId = section.id;
        }
        navLinks.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href') === `#${currentSectionId}`);
        });
      } catch (e) {
        console.error('Erro no updateActiveNav:', e);
      }
    };

    function init(){
      let savedTheme=null; try{ savedTheme = localStorage.getItem('symbol.v11.theme'); }catch{}
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      setTheme(savedTheme ? savedTheme : (prefersDark ? 'dark' : 'light'));

      let savedFont=null; try{ savedFont = localStorage.getItem('symbol.v11.font'); }catch{}
      setFont(savedFont ? parseInt(savedFont,10) : DEFAULT);

      let isSidebarMinimized = false; try { isSidebarMinimized = localStorage.getItem('symbol.v11.sidebar.minimized') === 'true'; } catch {}
      setSidebarState(isSidebarMinimized);

      themeSwitch?.addEventListener('change', e => setTheme(e.target.checked ? 'dark' : 'light'));
      decBtn?.addEventListener('click', () => setFont(parseFloat(getComputedStyle(root).fontSize) - STEP));
      incBtn?.addEventListener('click', () => setFont(parseFloat(getComputedStyle(root).fontSize) + STEP));
      toggleSidebarBtn?.addEventListener('click', () => setSidebarState(!body.classList.contains('sidebar-minimized')));
      
      window.addEventListener('scroll', updateActiveNav);
      updateActiveNav();
    }

    if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init); else init();
  })();
  
  (function() {
      const openBtn = document.getElementById('download-kit-btn');
      const closeBtn = document.getElementById('close-modal-btn');
      const modal = document.getElementById('kit-modal');
      const copyBtns = document.querySelectorAll('.copy-btn');
      
      const toggle = () => modal.classList.toggle('is-visible');
      let lastFocus = null;

      openBtn?.addEventListener('click', () => {
          lastFocus = document.activeElement;
          toggle();
          const h3 = modal.querySelector('h3');
          h3 && h3.focus();
      });
      closeBtn?.addEventListener('click', () => {
          toggle();
          lastFocus && lastFocus.focus();
      });
      modal?.addEventListener('click', (e) => {
          if (e.target === modal) {
            toggle();
            lastFocus && lastFocus.focus();
          }
      });
      modal?.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            toggle();
            lastFocus && lastFocus.focus();
          }
      });
      modal?.addEventListener('keydown', (e) => {
          if (e.key !== 'Tab') return;
          const focusable = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
          const first = focusable[0], last = focusable[focusable.length - 1];
          if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
          else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
      });

      copyBtns.forEach(btn => {
          btn.addEventListener('click', () => {
              const targetId = btn.dataset.copyTarget;
              const textToCopy = targetId ? document.getElementById(targetId).textContent : btn.dataset.copyText;
              navigator.clipboard.writeText(textToCopy).then(() => {
                  const originalText = btn.textContent;
                  btn.classList.add('copied');
                  btn.textContent = 'Copiado!';
                  setTimeout(() => { btn.classList.remove('copied'); btn.textContent = originalText; }, 1600);
              });
          });
      });
  })();

  (function(){
      const lazySections = document.querySelectorAll('section[data-lazy]');
      if (!('IntersectionObserver' in window)) return;
      const observer = new IntersectionObserver((entries, obs) => {
          entries.forEach(entry => {
              if (entry.isIntersecting) {
                  entry.target.removeAttribute('data-lazy');
                  obs.unobserve(entry.target);
              }
          });
      }, { rootMargin: '200px' });
      lazySections.forEach(section => observer.observe(section));
  })();
  </script>
</body>
</html>
